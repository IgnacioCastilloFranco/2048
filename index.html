<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2048 Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @keyframes scaleUp { 
        0% { transform: translate(var(--tx), var(--ty)) scale(1); }
        50% { transform: translate(var(--tx), var(--ty)) scale(1.3); }
        100% { transform: translate(var(--tx), var(--ty)) scale(1); }
      }
      .scale-up {
        animation: scaleUp 0.3s ease forwards;
      }
      .neon-text {
        color: #22d3ee;
        text-shadow: 
          0 0 10px #22d3ee,
          0 0 20px #22d3ee,
          0 0 40px #0891b2,
          0 0 80px #0891b2;
      }
      
      /* Desktop defaults */
      .grid-container {
        width: 446px;
        height: 446px;
        padding: 8px;
        touch-action: none;
      }
      .overlay-box {
        width: 446px;
        height: 446px;
      }
      
      /* Mobile layout */
      @media (max-width: 500px) {
        .grid-container {
          width: calc(100vw - 32px);
          height: calc(100vw - 32px);
        }
        .overlay-box {
          width: calc(100vw - 32px);
          height: calc(100vw - 32px);
        }
        .game-title {
          font-size: 2rem !important;
          margin-bottom: 0 !important;
        }
        .header-row {
          flex-direction: row !important;
          flex-wrap: wrap !important;
          justify-content: center !important;
          gap: 0.75rem !important;
          margin-bottom: 0.5rem !important;
        }
        .score-box {
          padding: 0.5rem 0.75rem !important;
          min-width: auto !important;
        }
        .score-box .label {
          font-size: 0.7rem !important;
        }
        .score-box .value {
          font-size: 1.1rem !important;
        }
        .restart-btn {
          padding: 0.4rem 1rem !important;
          font-size: 0.9rem !important;
        }
      }
    </style>
  </head>
  <body class="flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white p-4">
    
    <!-- Header with title, scores, and restart -->
    <div class="header-row flex items-center gap-4 mb-6">
      <h1 class="game-title text-5xl font-bold neon-text">2048</h1>
      
      <div class="score-box flex flex-col items-center justify-center bg-slate-800 rounded-lg p-3 min-w-[80px]">
        <span class="label text-sm text-slate-400">Score</span>
        <span class="value text-2xl font-bold text-white" id="score">0</span>
      </div>
      
      <div class="score-box flex flex-col items-center justify-center bg-slate-800 rounded-lg p-3 min-w-[80px]">
        <span class="label text-sm text-slate-400">Best</span>
        <span class="value text-2xl font-bold text-amber-400" id="best-score">0</span>
      </div>
      
      <button id="restart-btn" class="restart-btn px-4 py-2 bg-indigo-600 text-white text-lg font-bold rounded hover:bg-indigo-500 border border-indigo-400">
        Restart
      </button>
    </div>
    
    <!-- Game grid -->
    <div class="grid-container relative bg-slate-700 rounded-lg"></div>
  
    <div id="game-over" class="overlay-box hidden fixed z-20 bg-red-900 bg-opacity-90 flex items-center justify-center rounded-lg"
      style="top: 50%; left: 50%; transform: translate(-50%, -50%);">
      <h2 class="text-3xl sm:text-5xl font-bold text-red-200 text-center px-4">Game Over!</h2>
    </div>

    <div id="win" class="overlay-box hidden fixed z-20 bg-emerald-900 bg-opacity-90 flex flex-col items-center justify-center rounded-lg"
        style="top: 50%; left: 50%; transform: translate(-50%, -50%);">
      <h2 class="text-2xl sm:text-4xl font-bold text-emerald-200 text-center px-4">YOU WIN !!!<br>Congratulations!</h2>
      <div class="text-5xl sm:text-7xl my-4">ðŸŽ‰ ðŸ¥‡</div>
      <button id="continue-btn" class="mt-4 px-4 py-2 bg-slate-800 text-emerald-400 font-bold rounded hover:bg-slate-700 border border-emerald-500">
        Continue Playing
      </button>
    </div>

    <script src="2048Game.js"></script>
    <script>
      // Touch swipe support for mobile
      let touchStartX = 0;
      let touchStartY = 0;
      const gridEl = document.querySelector('.grid-container');

      gridEl.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
        touchStartY = e.changedTouches[0].screenY;
      }, { passive: true });

      gridEl.addEventListener('touchend', (e) => {
        const touchEndX = e.changedTouches[0].screenX;
        const touchEndY = e.changedTouches[0].screenY;
        const diffX = touchEndX - touchStartX;
        const diffY = touchEndY - touchStartY;
        const minSwipe = 50;

        if (Math.abs(diffX) > Math.abs(diffY)) {
          if (Math.abs(diffX) > minSwipe) {
            document.dispatchEvent(new KeyboardEvent('keydown', { key: diffX > 0 ? 'ArrowRight' : 'ArrowLeft' }));
          }
        } else {
          if (Math.abs(diffY) > minSwipe) {
            document.dispatchEvent(new KeyboardEvent('keydown', { key: diffY > 0 ? 'ArrowDown' : 'ArrowUp' }));
          }
        }
      }, { passive: true });
    </script>
  </body>
</html>
